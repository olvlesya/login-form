(this["webpackJsonplogin-form"]=this["webpackJsonplogin-form"]||[]).push([[0],{146:function(e,t,a){e.exports={content:"App_content__3mxrf"}},182:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var s=a(6),n=a(0),c=a.n(n),r=a(23),i=a.n(r),l=a(68),o=a(36),j=a(139),u=a(60),d=a.n(u),b=a(26),h=(a(182),a(66)),O=a(24),m=a(42),p=a(261),f=a(153),x=a(263),g=a(62),v={labelCol:{span:8},wrapperCol:{span:16}},y={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},_=a(262),C=Object(s.jsx)(p.a.Item,{name:"prefix",noStyle:!0,children:Object(s.jsx)(_.a,{style:{width:70},children:Object(s.jsx)(_.a.Option,{value:"+7",children:"+7"})})}),w=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],r=p.a.useForm(),i=Object(m.a)(r,1)[0],l=Object(n.useState)(!1),o=Object(m.a)(l,2),j=o[0],u=o[1];if(j)return Object(s.jsx)(O.a,{to:"/login",push:!0});return Object(s.jsxs)(p.a,Object(b.a)(Object(b.a)({},v),{},{name:"sign-up",initialValues:{prefix:"+7"},form:i,className:"logInForm",onFinish:function(e){c(!0);var t=function(e){var t=e.name,a=e.email,s=e.password,n=e.phone,c=e.surname,r=e.country_key;return{user:{email:a,password:s},phone:e.prefix+n,invited_by:"RU-637164",name:t,surname:c,country_key:r}}(e);console.log(t),function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(t,a){setTimeout((function(){e?t({user:{email:"lesyonoknou@gmail.com",is_active:!1},client_id:"RU-839861",phone:"+48535430288",invited_by:"RU-637164",name:"Olesia",surname:"Nikonova",country:1}):a({user:{password:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."]},phone:["\u041a\u043b\u0438\u0435\u043d\u0442 \u0441 \u0442\u0430\u043a\u0438\u043c \u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442."],country_key:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."]})}),2e3)}))}(!1).then((function(){f.a.success({message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"})})).catch((function(e){f.a.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"}),i.setFields(function(e){return Object.keys(e).reduce((function(t,a){return e[a]instanceof Array?t.concat({name:a,errors:e[a]}):t.concat(Object.keys(e[a]).map((function(t){return{name:t,errors:e[a][t]}})))}),[])}(e))})).then((function(){c(!1)}))},children:[Object(s.jsx)(p.a.Item,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u043e\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",type:"email"}],children:Object(s.jsx)(x.a,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(s.jsx)(x.a.Password,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please repeat the password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"):Promise.resolve()}}}],children:Object(s.jsx)(x.a.Password,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",extra:"\u041c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442. \u041c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043b\u043e\u0433\u0438\u043d\u0430",rules:[{required:!0,pattern:/^\d+$/,message:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0438\u0441\u043b\u0430"}],children:Object(s.jsx)(x.a,{addonBefore:C,disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f!"}],children:Object(s.jsx)(x.a,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u0412\u0430\u0448\u0430 \u0444\u0430\u043c\u0438\u043b\u0438\u044f",name:"surname",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u0444\u0430\u043c\u0438\u043b\u0438\u044e!"}],children:Object(s.jsx)(x.a,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u041a\u043b\u044e\u0447 \u0441\u0442\u0440\u0430\u043d\u044b",name:"country_key",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043b\u044e\u0447 \u0441\u0442\u0440\u0430\u043d\u044b"}],children:Object(s.jsx)(x.a,{disabled:a})}),Object(s.jsxs)(p.a.Item,Object(b.a)(Object(b.a)({},y),{},{children:[Object(s.jsx)(g.a,{loading:a,type:"primary",htmlType:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(s.jsx)(g.a,{htmlType:"button",onClick:function(){u(!0)},children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})]}))]}))},S={labelCol:{span:8},wrapperCol:{span:16}},k={wrapperCol:{offset:8,span:16}},U=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(o.b)(),i=Object(n.useState)(!1),l=Object(m.a)(i,2),j=l[0],u=l[1];if(j)return Object(s.jsx)(O.a,{to:"/signup",push:!0});return Object(s.jsxs)(p.a,Object(b.a)(Object(b.a)({},S),{},{name:"sign-in",className:"logInForm",onFinish:function(e){c(!0),d.a.post("http://erp.apptrix.ru/api/clients/token/",e).then((function(e){r({type:"auth/login",payload:e.data})})).catch((function(e){f.a.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!",description:e.response.data.detail}),c(!1)}))},children:[Object(s.jsx)(p.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",extra:"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b \u0438\u043b\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"}],children:Object(s.jsx)(x.a,{disabled:a})}),Object(s.jsx)(p.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(s.jsx)(x.a.Password,{disabled:a})}),Object(s.jsxs)(p.a.Item,Object(b.a)(Object(b.a)({},k),{},{children:[Object(s.jsx)(g.a,{type:"primary",htmlType:"submit",children:"\u0412\u0445\u043e\u0434"}),Object(s.jsx)(g.a,{htmlType:"button",loading:a,onClick:function(){u(!0)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}))]}))},I=a(260),N=a(265),T=a(264),F=a(259),P=a(266),q=a(267),D=a(268),A=a(269),J=a(270),R=a(49),E=function(){var e=Object(o.b)(),t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],i=a[1],l=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],s=t[1],c=Object(o.c)((function(e){return e.auth})),r=Object(o.b)();return Object(n.useEffect)((function(){(null===c||void 0===c?void 0:c.access)&&d.a.get("http://erp.apptrix.ru/api/clients/".concat(c.client_id,"/")).then((function(e){s(e.data)})).catch((function(e){401===e.response.status?d.a.post("http://erp.apptrix.ru/api/clients/token/refresh/",{refresh:c.refresh}).then((function(e){r({type:"auth/refresh",payload:e.data.access})})).catch((function(){f.a.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",description:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"}),r({type:"auth/logout"})})):r({type:"auth/logout"})}))}),[null===c||void 0===c?void 0:c.access,null===c||void 0===c?void 0:c.client_id,null===c||void 0===c?void 0:c.refresh]),a}();return l?Object(s.jsxs)(c.a.Fragment,{children:[Object(s.jsx)(I.a,{title:Object(s.jsxs)("div",{className:R.detailsUserTitle,children:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",l.client_id]}),extra:Object(s.jsx)(N.a,{content:l.verified?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d":"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d",children:l.verified?Object(s.jsx)(P.a,{className:R.detailsUserStatus,twoToneColor:"#52c41a"}):Object(s.jsx)(q.a,{className:R.detailsUserStatus,twoToneColor:"#ff4f4f"})}),actions:[Object(s.jsx)(D.a,{onClick:function(){i(!0)}}),null],children:Object(s.jsxs)("section",{className:R.detailsCard,children:[Object(s.jsx)("aside",{className:R.detailsCardAvatar,children:Object(s.jsx)("img",{src:l.avatar,alt:""})}),Object(s.jsxs)("section",{children:[Object(s.jsxs)("p",{className:R.detailsUserName,children:[l.name," ",l.surname]}),Object(s.jsx)("p",{className:R.detailsUserEmail,children:Object(s.jsxs)("a",{href:"mailto:".concat(l.email),children:[Object(s.jsx)(A.a,{})," ",l.email]})}),Object(s.jsx)("p",{className:R.detailsUserPhone,children:Object(s.jsxs)("a",{href:"tel:".concat(l.phone),children:[Object(s.jsx)(J.a,{})," ",l.phone]})})]})]})}),Object(s.jsx)(T.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",visible:r,onOk:function(){e({type:"auth/logout"})},onCancel:function(){i(!1)},okText:"\u0412\u044b\u0439\u0442\u0438",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:Object(s.jsx)("p",{children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?"})})]}):Object(s.jsx)(F.a,{size:"large"})},B=a(102),G=function(e){var t=e.children,a=Object(B.a)(e,["children"]),n=Object(o.c)((function(e){return e.auth}));return Object(s.jsx)(O.b,Object(b.a)(Object(b.a)({},a),{},{children:n?t:Object(s.jsx)(O.a,{to:"/login"})}))},z=function(e){var t=e.children,a=Object(B.a)(e,["children"]),n=Object(o.c)((function(e){return e.auth}));return Object(s.jsx)(O.b,Object(b.a)(Object(b.a)({},a),{},{children:n?Object(s.jsx)(O.a,{to:"/"}):t}))},L=(a(255),a(146));var V=function(){return Object(s.jsx)(h.a,{children:Object(s.jsx)("div",{className:L.content,children:Object(s.jsxs)(O.d,{children:[Object(s.jsx)(z,{path:"/login",children:Object(s.jsx)(U,{})}),Object(s.jsx)(z,{path:"/signup",children:Object(s.jsx)(w,{})}),Object(s.jsx)(G,{path:"/",children:Object(s.jsx)(E,{})})]})})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,271)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))},Z=Object(l.createStore)(Object(l.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"auth/login"===t.type?t.payload:"auth/logout"===t.type?null:"auth/refresh"===t.type?Object(b.a)(Object(b.a)({},e),{},{access:t.payload}):e}}),function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),Object(j.composeWithDevTools)());Z.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}(Z.getState())})),u.interceptors.request.use((function(e){var t=Z.getState().auth;return t&&(e.headers.Authorization="Bearer ".concat(t.access)),e})),i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(o.a,{store:Z,children:Object(s.jsx)(V,{})})}),document.getElementById("root")),W()},49:function(e,t,a){e.exports={detailsCard:"Details_detailsCard__1GoGC",detailsCardAvatar:"Details_detailsCardAvatar__2p3G5",detailsUserTitle:"Details_detailsUserTitle__1tWCK",detailsUserStatus:"Details_detailsUserStatus__2_ZTo",detailsUserName:"Details_detailsUserName__3DHZR",detailsUserEmail:"Details_detailsUserEmail__1a1N7",detailsUserPhone:"Details_detailsUserPhone__f_JRJ"}}},[[256,1,2]]]);
//# sourceMappingURL=main.95565d7c.chunk.js.map