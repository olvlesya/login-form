{"version":3,"sources":["App.module.scss","pages/SignUp/formConfig.js","pages/SignUp/inputAddons.jsx","pages/SignUp/SignUp.jsx","pages/SignUp/utilities.js","pages/SignUp/request.js","pages/SignIn/SignIn.jsx","store/auth/actions.js","pages/Details/Details.jsx","pages/Details/useAuth.js","common/PrivateRoute.jsx","common/NotAuthRoute.jsx","App.js","reportWebVitals.js","index.js","store/auth/reducer.js","pages/Details/Details.module.scss"],"names":["module","exports","layout","labelCol","span","wrapperCol","tailFormItemLayout","xs","offset","sm","prefixSelector","Item","name","noStyle","style","width","Option","value","SignUp","useState","formDisabled","setFormDisabled","Form","useForm","formInstance","redirect","setRedirect","to","push","initialValues","prefix","form","className","onFinish","fields","request","email","password","phone","surname","country_key","user","invited_by","mapToRequest","console","log","success","Promise","resolve","reject","setTimeout","is_active","client_id","country","axios","then","notification","message","catch","errors","error","setFields","Object","keys","reduce","acc","key","Array","concat","map","internalKey","mapErrorsToFieldsConfig","label","rules","required","type","disabled","hasFeedback","Password","dependencies","getFieldValue","validator","_","extra","pattern","addonBefore","loading","htmlType","onClick","tailLayout","SignIn","dispatch","useDispatch","values","post","response","payload","data","description","detail","Details","confirmVisible","setConfirmVisible","setUser","auth","useSelector","state","useEffect","access","get","status","refresh","useAuth","Fragment","title","detailsUserTitle","content","verified","CheckCircleTwoTone","detailsUserStatus","twoToneColor","CloseCircleTwoTone","actions","LogoutOutlined","detailsCard","detailsCardAvatar","src","avatar","alt","detailsUserName","detailsUserEmail","href","MailOutlined","detailsUserPhone","PhoneOutlined","visible","onOk","onCancel","okText","cancelText","size","PrivateRoute","children","rest","NotAuthRoute","App","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","combineReducers","action","serializedState","localStorage","getItem","JSON","parse","err","loadState","composeWithDevTools","subscribe","stringify","setItem","saveState","getState","use","req","headers","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mGACAA,EAAOC,QAAU,CAAC,QAAU,uB,gOCDfC,EAAS,CACpBC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,KAIGE,EAAqB,CAChCD,WAAY,CACVE,GAAI,CACFH,KAAM,GACNI,OAAQ,GAEVC,GAAI,CACFL,KAAM,GACNI,OAAQ,K,SCdDE,EACX,cAAC,IAAKC,KAAN,CAAWC,KAAK,SAASC,SAAO,EAAhC,SACE,cAAC,IAAD,CAAQC,MAAO,CAAEC,MAAO,IAAxB,SACE,cAAC,IAAOC,OAAR,CAAeC,MAAM,KAArB,oBCEOC,EAAS,WAAO,IAAD,EACcC,oBAAS,GADvB,mBACnBC,EADmB,KACLC,EADK,OAEHC,IAAKC,UAArBC,EAFmB,sBAGML,oBAAS,GAHf,mBAGnBM,EAHmB,KAGTC,EAHS,KAI1B,GAAID,EACF,OAAO,cAAC,IAAD,CAAUE,GAAG,SAASC,MAAI,IAoBnC,OACE,eAAC,IAAD,2BACM1B,GADN,IAEEU,KAAK,UACLiB,cAAe,CACbC,OAAQ,MAEVC,KAAMP,EACNQ,UAAU,YACVC,SA1Ba,SAACC,GAChBb,GAAgB,GAChB,IAAMc,EClBkB,SAAC,GAAD,IAC1BvB,EAD0B,EAC1BA,KACAwB,EAF0B,EAE1BA,MACAC,EAH0B,EAG1BA,SACAC,EAJ0B,EAI1BA,MACAC,EAL0B,EAK1BA,QACAC,EAN0B,EAM1BA,YAN0B,MAQrB,CACLC,KAAM,CACJL,QACAC,YAEFC,MAb0B,EAO1BR,OAMgBQ,EAChBI,WAAY,YACZ9B,OACA2B,UACAC,eDCkBG,CAAaT,GAC7BU,QAAQC,IAAIV,GEnBK,WAAqB,IAApBW,IAAmB,yDACvC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACTJ,EACIE,EAAQ,CACNP,KAAM,CACJL,MAAO,wBACPe,WAAW,GAEbC,UAAW,YACXd,MAAO,eACPI,WAAY,YACZ9B,KAAM,SACN2B,QAAS,WACTc,QAAS,IAEXJ,EAAO,CACLR,KAAM,CACJJ,SAAU,CAAC,2JAEbC,MAAO,CAAC,0MACRE,YAAa,CAAC,8JAEnB,QFHHc,EAAM,GACHC,MAAK,WACJC,IAAaV,QAAQ,CAAEW,QAAS,iKAEjCC,OAAM,SAACC,GACNH,IAAaI,MAAM,CAAEH,QAAS,iGAC9BjC,EAAaqC,UCNkB,SAACF,GAAD,OACrCG,OAAOC,KAAKJ,GAAQK,QAAO,SAACC,EAAKC,GAC/B,OAAIP,EAAOO,aAAgBC,MAClBF,EAAIG,OAAO,CAChBxD,KAAMsD,EACNP,OAAQA,EAAOO,KAGZD,EAAIG,OACTN,OAAOC,KAAKJ,EAAOO,IAAMG,KAAI,SAACC,GAAD,MAAkB,CAC7C1D,KAAM0D,EACNX,OAAQA,EAAOO,GAAKI,UAGvB,IDR0BC,CAAwBZ,OAEhDJ,MAAK,WACJlC,GAAgB,OAKpB,UAUE,cAAC,IAAKV,KAAN,CACE6D,MAAM,oGACN5D,KAAK,QACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,yNACTkB,KAAM,UAPZ,SAWE,cAAC,IAAD,CAAOC,SAAUxD,MAGnB,cAAC,IAAKT,KAAN,CACE6D,MAAM,uCACN5D,KAAK,WACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,gCAGboB,aAAW,EATb,SAWE,cAAC,IAAMC,SAAP,CAAgBF,SAAUxD,MAE5B,cAAC,IAAKT,KAAN,CACE6D,MAAM,8FACN5D,KAAK,UACLmE,aAAc,CAAC,YACfF,aAAW,EACXJ,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,+BAEX,gBAAGuB,EAAH,EAAGA,cAAH,MAAwB,CACtBC,UADsB,SACZC,EAAGjE,GACX,OAAKA,GAAS+D,EAAc,cAAgB/D,EAGrC8B,QAAQE,OAAO,6GAFbF,QAAQC,cAbzB,SAoBE,cAAC,IAAM8B,SAAP,CAAgBF,SAAUxD,MAE5B,cAAC,IAAKT,KAAN,CACE6D,MAAM,6CACN5D,KAAK,QACLuE,MAAM,wUACNV,MAAO,CACL,CACEC,UAAU,EACVU,QAAS,QACT3B,QAAS,oPARf,SAYE,cAAC,IAAD,CAAO4B,YAAa3E,EAAgBkE,SAAUxD,MAEhD,cAAC,IAAKT,KAAN,CACE6D,MAAM,8CACN5D,KAAK,OACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,4FANf,SAUE,cAAC,IAAD,CAAOmB,SAAUxD,MAEnB,cAAC,IAAKT,KAAN,CACE6D,MAAM,sEACN5D,KAAK,UACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,oHANf,SAUE,cAAC,IAAD,CAAOmB,SAAUxD,MAEnB,cAAC,IAAKT,KAAN,CACE6D,MAAM,gEACN5D,KAAK,cACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,6GANf,SAUE,cAAC,IAAD,CAAOmB,SAAUxD,MAEnB,eAAC,IAAKT,KAAN,2BAAeL,GAAf,cACE,cAAC,IAAD,CAAQgF,QAASlE,EAAcuD,KAAK,UAAUY,SAAS,SAAvD,mGAGA,cAAC,IAAD,CACEA,SAAS,SACTC,QAAS,WACP9D,GAAY,IAHhB,yFG5IFxB,EAAS,CACbC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,KAGJqF,EAAa,CACjBpF,WAAY,CACVG,OAAQ,EACRJ,KAAM,KAIGsF,EAAS,WAAO,IAAD,EACcvE,oBAAS,GADvB,mBACnBC,EADmB,KACLC,EADK,KAEpBsE,EAAWC,cAFS,EAGMzE,oBAAS,GAHf,mBAGnBM,EAHmB,KAGTC,EAHS,KAI1B,GAAID,EACF,OAAO,cAAC,IAAD,CAAUE,GAAG,UAAUC,MAAI,IAkBpC,OACE,eAAC,IAAD,2BAAU1B,GAAV,IAAkBU,KAAK,UAAUoB,UAAU,YAAYC,SAjBxC,SAAC4D,GAChBxE,GAAgB,GAChBiC,IACGwC,KAAK,2CAA4CD,GACjDtC,MAAK,SAACwC,GACLJ,EClCwB,CAC9BhB,KAAM,aACNqB,QDgCqBD,EAASE,UAEzBvC,OAAM,SAACE,GACNJ,IAAaI,MAAM,CACjBH,QAAS,2GACTyC,YAAatC,EAAMmC,SAASE,KAAKE,SAEnC9E,GAAgB,OAKpB,UACE,cAAC,IAAKV,KAAN,CACE6D,MAAM,iCACN5D,KAAK,WACLuE,MAAM,sOACNV,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,yHAPf,SAWE,cAAC,IAAD,CAAOmB,SAAUxD,MAGnB,cAAC,IAAKT,KAAN,CACE6D,MAAM,uCACN5D,KAAK,WACL6D,MAAO,CACL,CACEC,UAAU,EACVjB,QAAS,qFANf,SAUE,cAAC,IAAMqB,SAAP,CAAgBF,SAAUxD,MAG5B,eAAC,IAAKT,KAAN,2BAAe8E,GAAf,cACE,cAAC,IAAD,CAAQd,KAAK,UAAUY,SAAS,SAAhC,sCAGA,cAAC,IAAD,CACEA,SAAS,SACTD,QAASlE,EACToE,QAAS,WACP9D,GAAY,IAJhB,yF,yFExDK0E,EAAU,WAErB,IAAMT,EAAWC,cAFU,EAGiBzE,oBAAS,GAH1B,mBAGpBkF,EAHoB,KAGJC,EAHI,KAIrB7D,ECpBe,WAAO,IAAD,EACHtB,mBAAS,MADN,mBACpBsB,EADoB,KACd8D,EADc,KAErBC,EAAOC,aAAY,SAACC,GAAD,OAAWA,EAAMF,QACpCb,EAAWC,cAgCjB,OA9BAe,qBAAU,YACR,OAAIH,QAAJ,IAAIA,OAAJ,EAAIA,EAAMI,SACRtD,IACGuD,IADH,4CAC4CL,EAAKpD,UADjD,MAEGG,MAAK,SAACwC,GACLQ,EAAQR,EAASE,SAElBvC,OAAM,SAACE,GACwB,MAA1BA,EAAMmC,SAASe,OACjBxD,IACGwC,KAAK,mDAAoD,CACxDiB,QAASP,EAAKO,UAEfxD,MAAK,SAACwC,GACLJ,EFhByB,CACvChB,KAAM,eACNqB,QEcoCD,EAASE,KAAKW,YAErClD,OAAM,WACLF,IAAaI,MAAM,CACjBH,QAAS,+FACTyC,YAAa,mMAEfP,EF3Ba,CAC3BhB,KAAM,mBE6BIgB,EF9BiB,CAC3BhB,KAAM,qBEiCH,QAAC6B,QAAD,IAACA,OAAD,EAACA,EAAMI,OAAP,OAAeJ,QAAf,IAAeA,OAAf,EAAeA,EAAMpD,UAArB,OAAgCoD,QAAhC,IAAgCA,OAAhC,EAAgCA,EAAMO,UAElCtE,EDfMuE,GAEb,OAAOvE,EACL,eAAC,IAAMwE,SAAP,WACE,cAAC,IAAD,CACEC,MACE,sBAAKlF,UAAWmF,mBAAhB,2HACuB1E,EAAKW,aAG9B+B,MACE,cAAC,IAAD,CACEiC,QACE3E,EAAK4E,SACD,0JACA,sKAJR,SAOG5E,EAAK4E,SACJ,cAACC,EAAA,EAAD,CACEtF,UAAWuF,oBACXC,aAAa,YAGf,cAACC,EAAA,EAAD,CACEzF,UAAWuF,oBACXC,aAAa,cAKrBE,QAAS,CACP,cAACC,EAAA,EAAD,CACEnC,QAAS,WACPc,GAAkB,MAItB,MAlCJ,SAqCE,0BAAStE,UAAW4F,cAApB,UACE,uBAAO5F,UAAW6F,oBAAlB,SACE,qBAAKC,IAAKrF,EAAKsF,OAAQC,IAAI,OAE7B,oCACE,oBAAGhG,UAAWiG,kBAAd,UACGxF,EAAK7B,KADR,IACe6B,EAAKF,WAEpB,mBAAGP,UAAWkG,mBAAd,SACE,oBAAGC,KAAI,iBAAY1F,EAAKL,OAAxB,UACE,cAACgG,EAAA,EAAD,IADF,IACoB3F,EAAKL,WAG3B,mBAAGJ,UAAWqG,mBAAd,SACE,oBAAGF,KAAI,cAAS1F,EAAKH,OAArB,UACE,cAACgG,EAAA,EAAD,IADF,IACqB7F,EAAKH,mBAMlC,cAAC,IAAD,CACE4E,MAAM,kIACNqB,QAASlC,EACTmC,KAAM,WACJ7C,EDvFmB,CAC3BhB,KAAM,iBCwFA8D,SAAU,WACRnC,GAAkB,IAEpBoC,OAAO,iCACPC,WAAW,uCAVb,SAYE,sLAIJ,cAAC,IAAD,CAAMC,KAAK,W,SEpGFC,EAAe,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAaC,EAAW,4BAC/CvC,EAAOC,aAAY,SAACC,GAAD,OAAWA,EAAMF,QAE1C,OAAO,cAAC,IAAD,2BAAWuC,GAAX,aAAkBvC,EAAOsC,EAAW,cAAC,IAAD,CAAUnH,GAAG,eCH7CqH,EAAe,SAAC,GAA2B,IAAzBF,EAAwB,EAAxBA,SAAaC,EAAW,4BAC/CvC,EAAOC,aAAY,SAACC,GAAD,OAAWA,EAAMF,QAE1C,OAAO,cAAC,IAAD,2BAAWuC,GAAX,aAAkBvC,EAAO,cAAC,IAAD,CAAU7E,GAAG,MAASmH,M,kBCuBzCG,MApBf,WACE,OACE,cAAC,IAAD,UACE,qBAAKjH,UAAWoF,UAAhB,SACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAc8B,KAAK,SAAnB,SACE,cAAC,EAAD,MAEF,cAAC,EAAD,CAAcA,KAAK,UAAnB,SACE,cAAC,EAAD,MAEF,cAAC,EAAD,CAAcA,KAAK,IAAnB,SACE,cAAC,EAAD,cCVGC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB9F,MAAK,YAAkD,IAA/C+F,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCyBRO,EAAQC,sBACZC,0BAAgB,CACdrD,KClCuB,WAA2B,IAA1BE,EAAyB,uDAAjB,KAAMoD,EAAW,uCACnD,MAAoB,eAAhBA,EAAOnF,KACFmF,EAAO9D,QAEI,gBAAhB8D,EAAOnF,KACF,KAEW,iBAAhBmF,EAAOnF,KACF,2BACF+B,GADL,IAEEE,OAAQkD,EAAO9D,UAGZU,KDFS,WAChB,IACE,IAAMqD,EAAkBC,aAAaC,QAAQ,SAC7C,GAAwB,OAApBF,EACF,OAEF,OAAOG,KAAKC,MAAMJ,GAClB,MAAOK,GACP,QAiBFC,GACAC,iCAEFX,EAAMY,WAAU,kBAhBE,SAAC7D,GACjB,IACE,IAAMqD,EAAkBG,KAAKM,UAAU9D,GACvCsD,aAAaS,QAAQ,QAASV,GAC9B,WAYkBW,CAAUf,EAAMgB,eAEtCrH,eAAmBnB,QAAQyI,KAAI,SAACC,GAAS,IAC/BrE,EAASmD,EAAMgB,WAAfnE,KAIR,OAHIA,IACFqE,EAAIC,QAAJ,+BAAyCtE,EAAKI,SAEzCiE,KAGTE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUtB,MAAOA,EAAjB,SACE,cAAC,EAAD,QAGJuB,SAASC,eAAe,SAM1BhC,K,mBE5DAnJ,EAAOC,QAAU,CAAC,YAAc,6BAA6B,kBAAoB,mCAAmC,iBAAmB,kCAAkC,kBAAoB,mCAAmC,gBAAkB,iCAAiC,iBAAmB,kCAAkC,iBAAmB,qC","file":"static/js/main.95565d7c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"App_content__3mxrf\"};","export const layout = {\r\n  labelCol: {\r\n    span: 8,\r\n  },\r\n  wrapperCol: {\r\n    span: 16,\r\n  },\r\n};\r\n\r\nexport const tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n","import React from \"react\";\r\nimport { Form, Select } from \"antd\";\r\n\r\nexport const prefixSelector = (\r\n  <Form.Item name=\"prefix\" noStyle>\r\n    <Select style={{ width: 70 }}>\r\n      <Select.Option value=\"+7\">+7</Select.Option>\r\n    </Select>\r\n  </Form.Item>\r\n);\r\n","import React, { useState } from \"react\";\r\nimport { Form, Input, Button, notification } from \"antd\";\r\nimport { axios } from \"./request\";\r\nimport { layout, tailFormItemLayout } from \"./formConfig\";\r\nimport { prefixSelector } from \"./inputAddons\";\r\nimport { mapToRequest, mapErrorsToFieldsConfig } from \"./utilities\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport const SignUp = () => {\r\n  const [formDisabled, setFormDisabled] = useState(false);\r\n  const [formInstance] = Form.useForm();\r\n  const [redirect, setRedirect] = useState(false);\r\n  if (redirect) {\r\n    return <Redirect to=\"/login\" push />;\r\n  }\r\n\r\n  const onFinish = (fields) => {\r\n    setFormDisabled(true);\r\n    const request = mapToRequest(fields);\r\n    console.log(request);\r\n    axios(false)\r\n      .then(() => {\r\n        notification.success({ message: \"Вы успешно зарегистрированы!\" });\r\n      })\r\n      .catch((errors) => {\r\n        notification.error({ message: \"Произошла ошибка!\" });\r\n        formInstance.setFields(mapErrorsToFieldsConfig(errors));\r\n      })\r\n      .then(() => {\r\n        setFormDisabled(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"sign-up\"\r\n      initialValues={{\r\n        prefix: \"+7\",\r\n      }}\r\n      form={formInstance}\r\n      className=\"logInForm\"\r\n      onFinish={onFinish}\r\n    >\r\n      <Form.Item\r\n        label=\"Электронная почта\"\r\n        name=\"email\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Введите верный адрес электоронной почты\",\r\n            type: \"email\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input disabled={formDisabled} />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Пароль\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your password!\",\r\n          },\r\n        ]}\r\n        hasFeedback\r\n      >\r\n        <Input.Password disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Повторите пароль\"\r\n        name=\"confirm\"\r\n        dependencies={[\"password\"]}\r\n        hasFeedback\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please repeat the password!\",\r\n          },\r\n          ({ getFieldValue }) => ({\r\n            validator(_, value) {\r\n              if (!value || getFieldValue(\"password\") === value) {\r\n                return Promise.resolve();\r\n              }\r\n              return Promise.reject(\"Пароли не совпадают!\");\r\n            },\r\n          }),\r\n        ]}\r\n      >\r\n        <Input.Password disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Телефон\"\r\n        name=\"phone\"\r\n        extra=\"Международный формат. Может использоваться в качестве логина\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            pattern: /^\\d+$/,\r\n            message: \"Номер телефона должен содержать только числа\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input addonBefore={prefixSelector} disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Ваше имя\"\r\n        name=\"name\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Укажите ваше имя!\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Ваша фамилия\"\r\n        name=\"surname\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Укажите вашу фамилию!\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Ключ страны\"\r\n        name=\"country_key\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Укажите ключ страны\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input disabled={formDisabled} />\r\n      </Form.Item>\r\n      <Form.Item {...tailFormItemLayout}>\r\n        <Button loading={formDisabled} type=\"primary\" htmlType=\"submit\">\r\n          Создать аккаунт\r\n        </Button>\r\n        <Button\r\n          htmlType=\"button\"\r\n          onClick={() => {\r\n            setRedirect(true);\r\n          }}\r\n        >\r\n          Авторизация\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","export const mapToRequest = ({\r\n  name,\r\n  email,\r\n  password,\r\n  phone,\r\n  surname,\r\n  country_key,\r\n  prefix,\r\n}) => ({\r\n  user: {\r\n    email,\r\n    password,\r\n  },\r\n  phone: prefix + phone,\r\n  invited_by: \"RU-637164\",\r\n  name,\r\n  surname,\r\n  country_key,\r\n});\r\n\r\nexport const mapErrorsToFieldsConfig = (errors) =>\r\n  Object.keys(errors).reduce((acc, key) => {\r\n    if (errors[key] instanceof Array) {\r\n      return acc.concat({\r\n        name: key,\r\n        errors: errors[key],\r\n      });\r\n    }\r\n    return acc.concat(\r\n      Object.keys(errors[key]).map((internalKey) => ({\r\n        name: internalKey,\r\n        errors: errors[key][internalKey],\r\n      }))\r\n    );\r\n  }, []);\r\n","export const axios = (success = true) => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      success\r\n        ? resolve({\r\n            user: {\r\n              email: \"lesyonoknou@gmail.com\",\r\n              is_active: false,\r\n            },\r\n            client_id: \"RU-839861\",\r\n            phone: \"+48535430288\",\r\n            invited_by: \"RU-637164\",\r\n            name: \"Olesia\",\r\n            surname: \"Nikonova\",\r\n            country: 1,\r\n          })\r\n        : reject({\r\n            user: {\r\n              password: [\"Это поле не может быть пустым.\"],\r\n            },\r\n            phone: [\"Клиент с таким Телефон уже существует.\"],\r\n            country_key: [\"Это поле не может быть пустым.\"],\r\n          });\r\n    }, 2000);\r\n  });\r\n};\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Form, Input, Button, notification } from \"antd\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logIn } from \"../../store/auth/actions\";\r\n\r\nconst layout = {\r\n  labelCol: {\r\n    span: 8,\r\n  },\r\n  wrapperCol: {\r\n    span: 16,\r\n  },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 8,\r\n    span: 16,\r\n  },\r\n};\r\n\r\nexport const SignIn = () => {\r\n  const [formDisabled, setFormDisabled] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const [redirect, setRedirect] = useState(false);\r\n  if (redirect) {\r\n    return <Redirect to=\"/signup\" push />;\r\n  }\r\n  const onFinish = (values) => {\r\n    setFormDisabled(true);\r\n    axios\r\n      .post(\"http://erp.apptrix.ru/api/clients/token/\", values)\r\n      .then((response) => {\r\n        dispatch(logIn(response.data));\r\n      })\r\n      .catch((error) => {\r\n        notification.error({\r\n          message: \"Ошибка авторизации!\",\r\n          description: error.response.data.detail,\r\n        });\r\n        setFormDisabled(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Form {...layout} name=\"sign-in\" className=\"logInForm\" onFinish={onFinish}>\r\n      <Form.Item\r\n        label=\"Логин\"\r\n        name=\"username\"\r\n        extra=\"Адрес электронной почты или номер телефона\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Введите пользователя!\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input disabled={formDisabled} />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Пароль\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Введите пароль!\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input.Password disabled={formDisabled} />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          Вход\r\n        </Button>\r\n        <Button\r\n          htmlType=\"button\"\r\n          loading={formDisabled}\r\n          onClick={() => {\r\n            setRedirect(true);\r\n          }}\r\n        >\r\n          Регистрация\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","export const logIn = (data) => ({\r\n  type: \"auth/login\",\r\n  payload: data,\r\n});\r\n\r\nexport const logOut = () => ({\r\n  type: \"auth/logout\",\r\n});\r\n\r\nexport const refreshToken = (access) => ({\r\n  type: \"auth/refresh\",\r\n  payload: access,\r\n});\r\n","import React, { useState } from \"react\";\r\nimport { Card, Popover, Modal, Spin } from \"antd\";\r\nimport {\r\n  CheckCircleTwoTone,\r\n  CloseCircleTwoTone,\r\n  LogoutOutlined,\r\n  PhoneOutlined,\r\n  MailOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logOut } from \"../../store/auth/actions\";\r\nimport { useAuth } from \"./useAuth\";\r\nimport {\r\n  detailsUserName,\r\n  detailsUserEmail,\r\n  detailsUserPhone,\r\n  detailsUserTitle,\r\n  detailsUserStatus,\r\n  detailsCard,\r\n  detailsCardAvatar,\r\n} from \"./Details.module.scss\";\r\n\r\nexport const Details = () => {\r\n  // Может быть в Redux, но для этого приложения можно использовать просто useState\r\n  const dispatch = useDispatch();\r\n  const [confirmVisible, setConfirmVisible] = useState(false);\r\n  const user = useAuth();\r\n\r\n  return user ? (\r\n    <React.Fragment>\r\n      <Card\r\n        title={\r\n          <div className={detailsUserTitle}>\r\n            Данные пользователя {user.client_id}\r\n          </div>\r\n        }\r\n        extra={\r\n          <Popover\r\n            content={\r\n              user.verified\r\n                ? \"Пользователь верифицирован\"\r\n                : \"Пользователь неверифицирован\"\r\n            }\r\n          >\r\n            {user.verified ? (\r\n              <CheckCircleTwoTone\r\n                className={detailsUserStatus}\r\n                twoToneColor=\"#52c41a\"\r\n              />\r\n            ) : (\r\n              <CloseCircleTwoTone\r\n                className={detailsUserStatus}\r\n                twoToneColor=\"#ff4f4f\"\r\n              />\r\n            )}\r\n          </Popover>\r\n        }\r\n        actions={[\r\n          <LogoutOutlined\r\n            onClick={() => {\r\n              setConfirmVisible(true);\r\n            }}\r\n          />,\r\n          // Чтобы создать видимость двух кнопок\r\n          null,\r\n        ]}\r\n      >\r\n        <section className={detailsCard}>\r\n          <aside className={detailsCardAvatar}>\r\n            <img src={user.avatar} alt=\"\" />\r\n          </aside>\r\n          <section>\r\n            <p className={detailsUserName}>\r\n              {user.name} {user.surname}\r\n            </p>\r\n            <p className={detailsUserEmail}>\r\n              <a href={`mailto:${user.email}`}>\r\n                <MailOutlined /> {user.email}\r\n              </a>\r\n            </p>\r\n            <p className={detailsUserPhone}>\r\n              <a href={`tel:${user.phone}`}>\r\n                <PhoneOutlined /> {user.phone}\r\n              </a>\r\n            </p>\r\n          </section>\r\n        </section>\r\n      </Card>\r\n      <Modal\r\n        title=\"Подтверждение действия\"\r\n        visible={confirmVisible}\r\n        onOk={() => {\r\n          dispatch(logOut());\r\n        }}\r\n        onCancel={() => {\r\n          setConfirmVisible(false);\r\n        }}\r\n        okText=\"Выйти\"\r\n        cancelText=\"Отмена\"\r\n      >\r\n        <p>Вы уверены, что хотите выйти?</p>\r\n      </Modal>\r\n    </React.Fragment>\r\n  ) : (\r\n    <Spin size=\"large\" />\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { notification } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { logOut, refreshToken } from \"../../store/auth/actions\";\r\n\r\nexport const useAuth = () => {\r\n  const [user, setUser] = useState(null);\r\n  const auth = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (auth?.access) {\r\n      axios\r\n        .get(`http://erp.apptrix.ru/api/clients/${auth.client_id}/`)\r\n        .then((response) => {\r\n          setUser(response.data);\r\n        })\r\n        .catch((error) => {\r\n          if (error.response.status === 401) {\r\n            axios\r\n              .post(\"http://erp.apptrix.ru/api/clients/token/refresh/\", {\r\n                refresh: auth.refresh,\r\n              })\r\n              .then((response) => {\r\n                dispatch(refreshToken(response.data.access));\r\n              })\r\n              .catch(() => {\r\n                notification.error({\r\n                  message: \"Произошла ошибка!\",\r\n                  description: \"Пожалуйста, авторизируйтесь ещё раз\",\r\n                });\r\n                dispatch(logOut());\r\n              });\r\n          } else {\r\n            dispatch(logOut());\r\n          }\r\n        });\r\n    }\r\n  }, [auth?.access, auth?.client_id, auth?.refresh]);\r\n\r\n  return user;\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nexport const PrivateRoute = ({ children, ...rest }) => {\r\n  const auth = useSelector((state) => state.auth);\r\n\r\n  return <Route {...rest}>{auth ? children : <Redirect to=\"/login\" />}</Route>;\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nexport const NotAuthRoute = ({ children, ...rest }) => {\r\n  const auth = useSelector((state) => state.auth);\r\n\r\n  return <Route {...rest}>{auth ? <Redirect to=\"/\" /> : children}</Route>;\r\n};\r\n","import React from \"react\";\nimport { BrowserRouter, Switch } from \"react-router-dom\";\nimport { SignUp } from \"./pages/SignUp\";\nimport { SignIn } from \"./pages/SignIn\";\nimport { Details } from \"./pages/Details\";\nimport { PrivateRoute } from \"./common/PrivateRoute\";\nimport { NotAuthRoute } from \"./common/NotAuthRoute\";\nimport \"antd/dist/antd.css\";\nimport { content } from \"./App.module.scss\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <div className={content}>\n        <Switch>\n          <NotAuthRoute path=\"/login\">\n            <SignIn />\n          </NotAuthRoute>\n          <NotAuthRoute path=\"/signup\">\n            <SignUp />\n          </NotAuthRoute>\n          <PrivateRoute path=\"/\">\n            <Details />\n          </PrivateRoute>\n        </Switch>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport * as axios from \"axios\";\nimport { authReducer } from \"./store/auth/reducer\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nconst loadState = () => {\n  try {\n    const serializedState = localStorage.getItem(\"state\");\n    if (serializedState === null) {\n      return undefined;\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nconst saveState = (state) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"state\", serializedState);\n  } catch {\n    // ignore write errors\n  }\n};\n\nconst store = createStore(\n  combineReducers({\n    auth: authReducer,\n  }),\n  loadState(),\n  composeWithDevTools()\n);\nstore.subscribe(() => saveState(store.getState()));\n\naxios.interceptors.request.use((req) => {\n  const { auth } = store.getState();\n  if (auth) {\n    req.headers[\"Authorization\"] = `Bearer ${auth.access}`;\n  }\n  return req;\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const authReducer = (state = null, action) => {\r\n  if (action.type === \"auth/login\") {\r\n    return action.payload;\r\n  }\r\n  if (action.type === \"auth/logout\") {\r\n    return null;\r\n  }\r\n  if (action.type === \"auth/refresh\") {\r\n    return {\r\n      ...state,\r\n      access: action.payload,\r\n    };\r\n  }\r\n  return state;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsCard\":\"Details_detailsCard__1GoGC\",\"detailsCardAvatar\":\"Details_detailsCardAvatar__2p3G5\",\"detailsUserTitle\":\"Details_detailsUserTitle__1tWCK\",\"detailsUserStatus\":\"Details_detailsUserStatus__2_ZTo\",\"detailsUserName\":\"Details_detailsUserName__3DHZR\",\"detailsUserEmail\":\"Details_detailsUserEmail__1a1N7\",\"detailsUserPhone\":\"Details_detailsUserPhone__f_JRJ\"};"],"sourceRoot":""}